apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "kubernetes-mcp-server.fullname" . }}-config
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "kubernetes-mcp-server.labels" . | nindent 4 }}
data:
  # MCP Server configuration
  mcp-config.json: |
    {
      "name": "kubernetes-mcp-server",
      "version": "{{ .Values.mcpServer.packageVersion }}",
      "description": "Kubernetes MCP Server for Llama Stack",
      "server": {
        "port": {{ .Values.mcpServer.port }},
        "ssePort": {{ .Values.mcpServer.ssePort }}
      },
      "kubernetes": {
        "inCluster": true,
        "namespace": "{{ .Values.global.namespace }}"
      }
    }
  
  # Startup information
  startup.sh: |
    #!/bin/bash
    
    # Display server information for debugging
    echo "âœ… MCP Server Configuration:"
    echo "   - SSE Port: {{ .Values.mcpServer.ssePort }}"
    echo "   - MCP Port: {{ .Values.mcpServer.port }}"
    echo "   - SSE Endpoint: http://localhost:{{ .Values.mcpServer.ssePort }}/sse"
    echo "   - Message Endpoint: http://localhost:{{ .Values.mcpServer.ssePort }}/message"
