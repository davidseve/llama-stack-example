# Default values for kubernetes-mcp-server.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# Global configuration
global:
  namespace: llama-stack-example

# Enable OpenShift specific features
openshift:
  route:
    enabled: true
    host: ""
    tls:
      termination: edge
      insecureEdgeTerminationPolicy: Redirect
  scc:
    create: true
    name: "kubernetes-mcp-server-scc"

replicaCount: 1

# Container image - official pre-built Go binary from quay.io
image:
  registry: quay.io
  repository: containers/kubernetes_mcp_server
  # Tag or sha digest for the image
  version: latest
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: "kubernetes-mcp-server"

# RBAC configuration
rbac:
  # Use "cluster-admin" for full access, or a custom role for production
  clusterRole: "cluster-admin"

# Kubeconfig for remote/specific cluster access (optional).
# When set, volume is mounted and config uses kubeconfig strategy.
# kubeconfigSecret: ""
# kubeconfigSecretKey: "kubeconfig"

podAnnotations: {}
podLabels: {}

# Default Security Context for the Pod when one is not provided
defaultPodSecurityContext:
  seccompProfile:
    type: RuntimeDefault

podSecurityContext: {}

# Default Security Context for the Container when one is not provided
defaultSecurityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
    - ALL
  runAsNonRoot: true

securityContext: {}

# Service configuration
service:
  type: ClusterIP
  port: 8080

# Resource limits
resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# Liveness and readiness probes using native /healthz endpoint
livenessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 10
  periodSeconds: 15
readinessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 5
  periodSeconds: 10

# Ingress configuration (disabled by default, using OpenShift Route instead)
ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: kubernetes-mcp-server.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

# Additional volumes
extraVolumes: []
# - name: foo
#   secret:
#     secretName: mysecret
#     optional: false

# Additional volumeMounts
extraVolumeMounts: []
# - name: foo
#   mountPath: "/etc/foo"
#   readOnly: true

nodeSelector: {}

tolerations: []

affinity: {}

# Path to the configuration file inside the container
configFilePath: /etc/kubernetes-mcp-server/config.toml

# MCP Server configuration options (rendered as TOML).
# See https://github.com/containers/kubernetes-mcp-server/blob/main/pkg/config/config.go
config:
  port: "{{ .Values.service.port }}"
  # Strategy to find clusters: "in-cluster" (uses ServiceAccount) or "kubeconfig" (uses kubeconfig file)
  cluster_provider_strategy: "in-cluster"
